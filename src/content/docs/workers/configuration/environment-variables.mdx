---
pcx_content_type: configuration
title: Environment variables
head: []
description: Environment variables are a type of binding that allow you to attach text strings or JSON values to your Worker

---

import { Render, TabItem, Tabs } from "~/components"

## Background

Environment variables are a type of binding that allow you to attach text strings or JSON values to your Worker. Environment variables are available on the [`env` parameter](/workers/runtime-apis/handlers/fetch/#parameters) passed to your Worker's [`fetch` event handler](/workers/runtime-apis/handlers/fetch/).

Text strings and JSON values are not encrypted and are useful for storing application configuration.

## Add environment variables via Wrangler

Text and JSON values are defined via the `[vars]` configuration in your `wrangler.toml` file. In the following example, `API_HOST` and `API_ACCOUNT_ID` are text values and `SERVICE_X_DATA` is a JSON value.

<Render file="envvar-example" />

Refer to the following example on how to access the `API_HOST` environment variable in your Worker code:

<Tabs> <TabItem label="JavaScript" icon="seti:javascript">

```js
export default {
  async fetch(request, env, ctx) {
    return new Response(`API host: ${env.API_HOST}`);
  }
}
```

</TabItem> <TabItem label="TypeScript" icon="seti:typescript">

```ts
export interface Env {
  API_HOST: string;
}

export default {
  async fetch(request, env, ctx): Promise<Response> {
    return new Response(`API host: ${env.API_HOST}`);
  }
} satisfies ExportedHandler<Env>;
```

</TabItem> </Tabs>

`vars` is a non-inheritable key. [Non-inheritable keys](/workers/wrangler/configuration/#non-inheritable-keys) are configurable at the top-level, but cannot be inherited by environments and must be specified for each environment.

To define environment variables for different environments, refer to the example below:

import { WranglerConfig } from "~/components";

<WranglerConfig>

```toml
name = "my-worker-dev"

[env.staging.vars]
API_HOST = "staging.example.com"
API_ACCOUNT_ID = "staging_example_user"
SERVICE_X_DATA = { URL = "service-x-api.dev.example", MY_ID = 123 }

[env.production.vars]
API_HOST = "production.example.com"
API_ACCOUNT_ID = "production_example_user"
SERVICE_X_DATA = { URL = "service-x-api.prod.example", MY_ID = 456 }
```

</WranglerConfig>

For local development with `wrangler dev`, variables in `wrangler.toml` are automatically overridden by any values defined in a `.dev.vars` file located in the root directory of your worker. This is useful for providing values you do not want to check in to source control.

```shell
API_HOST = "localhost:4000"
API_ACCOUNT_ID = "local_example_user"
```

Alternatively, you can specify per-environment values in `wrangler.toml` and provide an `environment` value via the `env` flag when developing locally like so `wrangler dev --env=local`.

## Add environment variables via the dashboard

To add environment variables via the dashboard:

1. Log in to [Cloudflare dashboard](https://dash.cloudflare.com/) and select your account.
2. Select **Workers & Pages**.
3. In **Overview**, select your Worker.
4. Select **Settings**.
5. Under **Variables and Secrets**, select **Add**.
6. Select a **Type**, input a **Variable name**, and input its **Value**. This variable will be made available to your Worker.
7. (Optional) To add multiple environment variables, select **Add variable**.
8. Select **Deploy** to implement your changes.

:::caution[Plaintext strings and secrets]


Select the **Secret** type if your environment variable is a [secret](/workers/configuration/secrets/).


:::

<Render file="env_and_secrets" />

## Environment variables and Node.js compatibility

When using the `nodejs_compat` and `nodejs_compat_populate_process_env` compatibility
flags, environment variables will also be available via the global `process.env`.

Text variable values are exposed directly.

JSON variable values that evaluate to string values are exposed as the parsed value.

JSON variable values that do not evaluate to string values are exposed as the raw
JSON string.

For example, imagine a worker with three environment variables, one text value, and
two JSON values:

* `FOO` with plaintext value `abc`,
* `BAR` with JSON value `"abc"`,
* `BAZ` with JSON value `"{ "a": 123 }"`

The value of `process.env.FOO` will be the JavaScript string `"abc"`.

The value of `process.env.BAR` will be the JavaScript string `"abc"` (note that the
JSON encoding is removed).

The value of `process.env.BAZ` will be the JSON-encoded string `"{ "a": 123 }"`.

These rules mean that if you have a JSON environment variable whose value is a
JSON-encoded string and you *want* to be able to parse it as JSON within your
application (e.g. `JSON.parse(process.env.BAR)`) then the value will need to
be "double encoded", for instance `'"\\"abc\\""'`.

Note also that because secrets are a form of environment variable within the runtime,
secrets are also exposed via `process.env`.

## Related resources

* Learn how to access environment variables in [ES modules syntax](/workers/reference/migrate-to-module-workers/) for an optimized experience.
